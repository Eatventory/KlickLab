## KlickLab 프로젝트 분석 보고서

<p align="center">
    <img src="https://raw.githubusercontent.com/Eatventory/KlickLab/refs/heads/main/frontend/src/assets/klicklab.png" width="480">
</p>

### 1. 프로젝트 개요: 어떤 서비스인가요?

**KlickLab**은 **클릭스트림 기반의 실시간 데이터 분석 플랫폼**입니다. 웹사이트에 방문하는 사용자들의 행동(페이지 조회, 클릭 등)을 실시간으로 수집하고, 분석 대시보드를 통해 시각화하여 보여주는 서비스입니다.

쉽게 말해, 우리 고객사들이 자신의 웹사이트에서 사용자들이 어떤 행동을 하는지 한눈에 파악하고, 데이터를 기반으로 더 나은 의사결정을 내릴 수 있도록 돕는 **웹사이트용 분석 솔루션**이라고 할 수 있습니다.

### 2. 기술 스택: 무엇으로 만들어졌나요?

*   **백엔드 (데이터 처리 및 API 서버)**
    *   **언어/프레임워크:** **Node.js** 환경에서 **Express.js** 프레임워크를 사용합니다. API 서버를 구축하는 데 널리 쓰이는 조합입니다.
    *   **데이터베이스:** 대용량 데이터 처리에 특화된 **ClickHouse**를 사용합니다. 대규모 로그 및 분석 데이터를 빠르고 효율적으로 처리하기 위한 탁월한 선택입니다.
    *   **주요 기능:**
        *   **데이터 수집(SDK):** 웹사이트에 설치할 수 있는 `analytics_sdk.js` 파일을 제공하여 사용자 행동 데이터를 수집합니다.
        *   **API 제공:** 프론트엔드 대시보드에 필요한 데이터를 가공하여 제공하는 다양한 API 엔드포인트(`routes` 폴더)를 갖추고 있습니다.
        *   **인증:** JWT(JSON Web Token)를 사용한 사용자 인증/인가 기능을 구현하여 안전하게 데이터를 보호합니다.

*   **프론트엔드 (사용자 대시보드)**
    *   **언어/프레임워크:** **React** 라이브러리와 **TypeScript**를 사용하여 안정적이고 확장 가능한 UI를 구축합니다. **Vite**를 빌드 도구로 사용하여 개발 속도를 높였습니다.
    *   **스타일링:** **Tailwind CSS**를 사용하여 일관되고 효율적인 UI 디자인을 구현했습니다.
    *   **데이터 시각화:** **Recharts**와 **D3.js** 라이브러리를 활용하여 다양한 차트(막대, 선, 파이, Sankey 다이어그램 등)를 구현, 데이터를 직관적으로 보여줍니다.
    *   **상태 관리:** **Zustand**를 사용하여 간결하고 효과적으로 앱의 상태를 관리합니다.

### 3. 프로젝트 구조: 어떻게 구성되어 있나요?

프로젝트는 기능별로 체계적으로 잘 구성되어 있습니다.

*   `backend/`: 데이터 처리 및 API 서버 관련 코드가 모두 이곳에 있습니다.
    *   `routes/`: **API 엔드포인트**를 기능별(사용자, 트래픽, 참여도 등)로 분리하여 관리합니다.
    *   `services/`: 데이터베이스 쿼리 등 **핵심 비즈니스 로직**을 담당하는 파일들이 모여있습니다.
    *   `utils/`: 날짜 변환, 쿼리 생성 등 **공통으로 사용되는 함수**들이 있습니다.
    *   `src/config/`: ClickHouse 데이터베이스 연결 설정 등 **환경 설정** 파일이 있습니다.
*   `frontend/`: 사용자가 보는 웹 대시보드 관련 코드가 모두 이곳에 있습니다.
    *   `components/`: 대시보드를 구성하는 **UI 컴포넌트**들이 기능별(개요, 사용자, 트래픽 등)로 잘 정리되어 있습니다.
    *   `pages/` 또는 `App.tsx` 내 라우팅: 각 대시보드 페이지를 정의하고 연결합니다.
    *   `utils/`: API 호출, 데이터 포맷팅 등 프론트엔드에서 공통으로 사용하는 함수들이 있습니다.
    *   `store/`: Zustand를 사용한 전역 상태 관리 코드가 있습니다.
*   `scripts/`: 데이터베이스 초기 설정(`setup.sh`, `seed.sql`)이나 배포(`deploy.sh`) 관련 스크립트가 있습니다.

### 4. 핵심 기능 분석

*   **실시간 데이터 분석:** ClickHouse의 집계 테이블(`agg_...`)과 실시간 테이블(`minutes_...`)을 활용하여 최근 데이터를 빠르게 조회하고, 과거 데이터는 별도의 플랫 테이블(`flat_...`)에 저장하여 효율적으로 관리합니다.
*   **다양한 분석 대시보드:**
    *   **개요(Overview):** 전체 방문자, 세션, 평균 체류 시간 등 핵심 지표(KPI)를 한눈에 보여줍니다.
    *   **사용자 분석(Users):** 연령, 성별, 지역, 기기 등 다양한 기준으로 사용자를 분석합니다.
    *   **유입 분석(Acquisition):** 어떤 경로(검색, 소셜 미디어 등)를 통해 사용자가 유입되었는지 분석합니다.
    *   **참여도 분석(Engagement):** 사용자들이 얼마나 오래 머무르고, 어떤 페이지를 많이 보는지 등 사이트 참여도를 분석합니다.
    *   **전환 분석(Conversion):** 설정된 목표(예: 구매, 회원가입)를 얼마나 달성했는지 퍼널 분석(Sankey 다이어그램) 등을 통해 심층적으로 보여줍니다.
*   **사용자 정의 기능:**
    *   **전환 이벤트 설정:** 관리자가 직접 '구매 완료', '회원가입' 등 중요한 전환 이벤트를 정의하고 추적할 수 있습니다.
    *   **이벤트 규칙 생성:** 특정 URL 방문 시 새로운 이벤트를 생성하는 등, 코드 수정 없이 동적으로 이벤트를 만들 수 있습니다.

### 5. 코드 품질 및 개선 제안

*   **장점:**
    *   **체계적인 구조:** 백엔드와 프론트엔드가 명확히 분리되어 있고, 각 내부 폴더 구조도 기능별로 잘 정리되어 있어 유지보수가 용이합니다.
    *   **최신 기술 스택:** React, TypeScript, Vite, Tailwind CSS 등 현대적인 웹 개발 기술을 적극적으로 활용하고 있습니다.
    *   **효율적인 데이터 처리:** 대용량 데이터 처리에 강점이 있는 ClickHouse를 사용하고, 집계/플랫 테이블로 데이터를 분리하여 관리하는 등 성능을 고려한 설계가 돋보입니다.

*   **개선 제안:**
    *   **테스트 코드 부재:** 현재 프로젝트에는 테스트 코드가 없습니다. 각 기능에 대한 단위 테스트(Unit Test)와 통합 테스트(Integration Test) 코드를 추가하면, 앞으로 새로운 기능을 추가하거나 코드를 수정할 때 발생할 수 있는 버그를 사전에 방지하고 안정성을 크게 높일 수 있습니다.
    *   **에러 처리 강화:** API 요청 실패 등 예외 상황에 대한 에러 처리를 프론트엔드에서 좀 더 보강하면, 사용자에게 더 안정적인 경험을 제공할 수 있습니다.
    *   **상세 문서화:** `README.md` 외에 각 API 엔드포인트의 상세 명세나 주요 컴포넌트의 역할에 대한 주석을 추가하면, 새로운 팀원이 프로젝트에 적응하는 데 큰 도움이 될 것입니다.

### 6. 총평

**KlickLab**은 매우 잘 설계된 **고기능성 웹 분석 플랫폼**입니다. 최신 기술 스택과 체계적인 구조를 바탕으로 안정적이고 확장 가능한 기반을 갖추고 있습니다. 위에서 제안한 테스트 코드 추가 및 문서화 작업이 이루어진다면, 더욱 완성도 높고 신뢰성 있는 서비스로 발전할 잠재력이 매우 큰 프로젝트입니다.
